/**
 * Main Sidebar
 */
@sidebar-bg-color: @color-grey-dark;
@logo-bg-color: darken(@sidebar-bg-color, 15);

@sidebar-width-collapsed: 3.75em;
@sidebar-width-full: 16em;

@sidebar-z-index: 99;


/**
 * Main Navigation
 */
@main-nav-links-text-color: @color-grey;
@main-nav-links-active-border-color: @color-primary;
@main-nav-links-height: 40px;
@main-nav-links-font-size: 1em;
@main-nav-icons-font-size: 1.25em;

@main-nav-border-width: 4px; // Border on .active state
@main-nav-border-color: @color-primary;


/**
 * ----------------------------------------------------------------
 *                     Default Width Sidebar
 * ----------------------------------------------------------------
 */
#main-sidebar {
	position: fixed;
	z-index: @sidebar-z-index;
	left: 0;
	top: 0;
	height: 100%;
	height: 100vh;
	background-color: @sidebar-bg-color;
	border-top: @lucca-banner-height solid darken(@logo-bg-color, 10);

	// Sidebar is collapsed by default - "mobile first"
	width: @sidebar-width-collapsed;
	.transition-properties(width);
	.transition-duration();

	a {
		.reset-links;
	}
	// ---------------------- Logotype ---------------------- //
	a#logo {
		height: @header-height;
		display: block;
		text-align: center;
		background-color: @logo-bg-color;
		padding: 1.25em 0.5em;

		span.img {
			overflow: hidden;
			display: block;
			height: 100%;
			margin: 0 auto;
			background-color: @logo-bg-color;
			background-repeat: no-repeat;
			background-position: center;
			background-size: contain;

			// Picto specifics
			width: @sidebar-width-collapsed - 1em;
			background-image: url("@{logo-small-source}");
			line-height: @header-height;
			color: #FFF;
			font-weight: bold;
			text-indent: -2000px;
		}
	}
	// ---------------------- Main navigation ---------------------- //
	nav#main-nav {
		ul {
			li {
				overflow: hidden;

				a {
					position: relative;
					display: block;
					width: @sidebar-width-full;
					height: @main-nav-links-height;
					line-height: @main-nav-links-height;
					color: @main-nav-links-text-color;
					font-size: @main-nav-links-font-size;
					border-left: @main-nav-border-width solid transparent;
					padding-left: .6em;
					.transition-properties(border-color, background-color, color);
					.transition-duration();

					&:before {
						margin-right: 0.5em;
						font-size: @main-nav-icons-font-size;
					}
					// Sidebar is collapsed by default - "mobile first"
					.section-name, .updates-count {
						.transition(opacity);
						visibility: hidden;
						.opacity(0);
					}

					.updates-count {
						.lucca-label;
						.yellow;
						font-size: 12px;
						border-radius: 50%;
						min-width: 1.5em;
						display: none;
					}

					&:hover,
					&.active {
						color: #fff;
					}

					&.active {
						border-color: @color-primary;
					}

					&.has-updates {
						&:after {
							position: absolute;
							left: 2.25em;
							top: 25%;
							margin-top: -3px;
							display: block;
							content: "";
							.border-radius(50%);
							width: 5px;
							height: 5px;
							background-color: @color-lucca;
							vertical-align: middle;
						}

						.updates-count {
							display: inline-block;
						}
					}
				}
			}
		}
	}
	// ---------------------- Toggle sidebar ---------------------- //
	#toggle-sidebar {
		position: absolute;
		bottom: 0;
		left: 0;
		display: block;
		width: 100%;
		border-top: 1px solid lighten(@sidebar-bg-color, 5);
		padding: 0.5em 0;
		.mixin-icon("d");
		.solo-icon;
		color: lighten(@sidebar-bg-color, 10);

		&:hover {
			color: #fff;
		}
	}

	@media(max-width: @screen-xs-max) {
		&:hover {
			.fullwidth-sidebar();
		}
		.tooltip {
			visibility: hidden;
			.opacity(0);
		}
	}
}




/**
 * ----------------------------------------------------------------
 *                     Full Width Sidebar
 * ----------------------------------------------------------------
 */
.fullwidth-sidebar() {
	width: @sidebar-width-full;
	// ---------------------- Logotype ---------------------- //
	a#logo {
		overflow: hidden;

		.img {
			// Full logotype specifics
			width: @sidebar-width-full - 4em;
			background-image: url("@{logo-large-source}");
		}
	}
	// ---------------------- Toggle Sidebar ---------------------- //
	#toggle-sidebar {
		.mixin-icon("g");
	}
	// ---------------------- Main navigation ---------------------- //
	nav#main-nav {
		ul {
			.tooltip {
				visibility: hidden;
			}

			li {
				a {
					.section-name, .updates-count {
						visibility: visible;
						.opacity(1);
					}

					&:after {
						display: none;
					}
				}
			}
		}
	}
}
