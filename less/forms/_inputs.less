@default-input-border-color: @color-grey-light;
@default-input-v-margin: (@default-body-text-size / 2);
@default-readonly-bg-color: #f8f8f8;
@default-input-placeholder-text-color: #CCC;
@default-input-height: 18px;

.lucca-input-group,
.lucca-form,
.lucca-form-validation {
	> input {
		.lucca-input;
	}
}

.lucca-input-group {
	position: relative;
	display: inline-block;
	vertical-align: top;

	label {
		.lucca-form-label;
	}
	/************************ GROUP ADDON ***********************/
	> .lucca-form-validation > input, > input, .lucca-group-addon {
		vertical-align: middle;
		position: relative;
	}

	.lucca-group-addon {
		.lucca-input;
		width: auto;
		font-weight: bold;
		background-color: @default-readonly-bg-color;
		border: 1px solid @default-input-border-color;

		&.lucca-icon {
			&:after, &:before {
				margin: 0;
			}
		}
	}

	.lucca-form-validation > input + .lucca-group-addon, > input + .lucca-group-addon {
		margin-left: -@default-border-radius;
		border-top-left-radius: 0;
		border-bottom-left-radius: 0;
	}

	.lucca-form-validation > .lucca-group-addon + input, > .lucca-group-addon + input {
		margin-left: -@default-border-radius;
		border-top-left-radius: 0;
		border-bottom-left-radius: 0;
	}
	/************************ VALIDATION ***********************/
	&.success, &.valid {
		input, .lucca-group-addon {
			.valid-input;
		}
	}

	&.error, &.warning, &.invalid {
		label {
			color: @color-error;
		}

		input, .lucca-group-addon {
			.invalid-input;
		}

		.lucca-form-validation-message {
			display: inline-block;
		}
	}
}

.lucca-form-validation {
	position: relative;
	display: inline-block;

	.lucca-form-validation-message {
		position: absolute;
		z-index: 10;
		display: none;
		left: 100%;
		top: @default-input-v-margin;
		min-height: @default-input-height + 2*@default-input-v-margin;
		width: 20em;
		background-color: @color-error;
		color: #FFF;
		padding: 0.5em 1em;
		font-size: 12px;
		border: 1px solid @color-error;
		margin-left: 1em;
		.drop-shadow();

		&:before {
			position: absolute;
			right: 100%;
			.triangle(left, @color-error);
		}
	}
}

.valid-input {
	border-color: @color-success;
	color: @color-success;
}

.invalid-input {
	border: 1px solid @color-error !important;
	color: @color-error;
	background-color: lighten(@color-error, 45);
}


.lucca-form-label {
	color: @color-grey;
	display: inline-block;
	vertical-align: middle;
	margin: 0;
	margin-right: 1em;
}

.lucca-input-size {
	display: inline-block;
	box-sizing: content-box;
	height: @default-input-height;
	margin: @default-input-v-margin 0;
	padding: @default-input-v-margin 0.5em;
}

.lucca-input-outer-size {
	display: inline-block;
	box-sizing: content-box;
	height: @default-input-height;
	padding: (2*@default-input-v-margin + 2px) 1em;
}

.lucca-input {
	.lucca-input-size;
	.rounded();
	border: 1px solid @default-input-border-color;
	color: @default-body-text-color;
	.transition-properties(border-color, color, background-color);
	.transition-duration(0.5s);

	&:active,
	&:focus {
		outline: none;
		.inner-shadow();
	}

	.placeholder({
		color: @default-input-placeholder-text-color;
		font-style: italic;
	});

	&input:read-only {
		background-color: @default-readonly-bg-color;
	}

	&.success:focus, &.valid:focus, &.ng-valid.ng-dirty:focus {
		.valid-input;
	}

	&.error, &.warning, &.invalid, &.ng-invalid.ng-dirty {
		.invalid-input;
	}
	// Default width
	width: 10em;

	&.long {
		width: 15em;
	}

	&.short {
		width: 5em;
	}

	&.x-short {
		width: 2.8em;
	}
}

textarea.lucca-input {
	height: auto;
	line-height: normal;
}

.lucca-input-borderless {
	.lucca-input;
	border: none;
}

.lucca-search {
	display: inline-block;
	position: relative;
	.mixin-icon("R");

	&:before {
		margin: 0;
		color: rgba(50, 50, 50, 0.25);
		position: absolute;
		left: .5em;
		top: 50%;
		margin-top: -0.5em;
	}

	input {
		.lucca-input;
		padding-left: 2em;
	}

	&.searching {
		&:before {
			content: "";
			.loading-gif();
			top: 50%;
			margin-top: -@default-loading-gif-size/2;
		}
	}
}

.lucca-input-focus-only {
	background: transparent;
	border-color: transparent;
	.transition-properties(background, color);
	.transition-duration();

	&:hover, &:focus {
		background: #FFF;
		border-color: @default-input-border-color;
		color: @default-body-text-color !important;
	}
}

.lucca-input-group .clear-input,
.lucca-input + .clear-input,
.lucca-search .clear-input {
	.reset-buttons();

	position: absolute;
	right: 1em;
	top: 50%; margin-top: -9px;
	padding: 0;

	text-align: center;
	color: #fff;
	font-size: 8px;
	width: 18px;
	height: 18px;
	.border-radius(50%);
	.mixin-icon('p');
	background-color: @color-grey-light;

	&:before {
		line-height: 2.5em;
		.solo-icon;
		margin: 0;
		top: -0.1em;
	}
}


/**
 * UI select Fix
 */
.ui-select-bootstrap {
	display: inline-block;
	margin: @default-input-v-margin 0;
	width: 15em;

	.ui-select-choices {
		width: auto;
	}

	.ui-select-toggle {
		overflow: hidden;
	}

	.ui-select-match {
		outline: none;
		.no-shadow;
	}

	a {
		text-decoration: none;
		&:active, &:focus {
			outline: none;
		}
	}
	
	.ui-select-choices-row.active > a {
		background-color: @color-primary;
		color: @color-over-primary;
	}
}

/**
 * UI dropdown fix
*/
.dropdown-menu {
	> li {
		&.sub-title {
			padding: 0 1.5em;
		}
		> a {
			color: @default-link-color;
			text-decoration: none;
		}
	}
}
