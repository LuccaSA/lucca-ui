
/**
 * Input
 * --------------------------------------------------------------------------- */

.lui.input {
	position: relative;
	display: inline-block;
	vertical-align: middle;
	.display-flex(true);
	line-height: (1em + 2 * @v-padding);

	> .addon, > input {
		line-height: (1em + 2 * @v-padding);
		display: inline-block;
		.flex();
	}

	// Inputs styling
	// =====
	> input, > select,
	>luid-moment, >.luid-moment {
		width: 100%;
		display: inline-block;
		vertical-align: middle;

		border-radius: @border-radius;
		border: 1px solid @border-color;
		background: #fff;
		color: @color;
		padding: 0 @h-padding;

		&:focus, &:active {
			outline: none;
			border-color: darken(@border-color, 10);
		}

		// Placeholders
		// =====
		.lui_placeholder({
			color: @placeholder-color;
			font-style: @placeholder-style;
		});
	}

	&.fitting {
		width: 100%;
	}
}

.lui.input input[type="text"],
.lui.input input[type="password"],
.lui.input input[type="search"],
.lui.input textarea { cursor: text; }

// Textareas
// ====
textarea.lui.input {
	border: 1px solid @border-color;
	&:focus, &:active { outline: none; }
}

// Icon support
// =====
.lui.input.icon {
	> input {
		padding-left: 2.5em;
	}
	.lui.icon {
		position: absolute;
		z-index: 2;
		top: 0; bottom: 0;
		height: 100%;
		left: 0;
		width: 2.5em;
		margin-right: 0.5em;
		&:before {
			position: absolute;
			top: 50%; left: 0; right: 0;
			-ms-transform: translate(0, -50%);
			transform: translate(0, -50%);
		}
	}
	&[class*="left icon"] {
		> input {
			padding-left: 0;
			padding-right: 2.5em;
		}
		.lui.icon {
			left: auto; right: 0;
			margin-right: 0;
			margin-left: 0.5em;
		}
	}
}


// Addons
// =====
.lui.input[class*="with addon"],
.lui.input[class*="with addons"] {
	> .lui.addon {
		display: inline-block;
		vertical-align: middle;
		border: 1px solid @border-color;
		padding: @v-padding @h-padding;
		background: @border-color;
	}

	> .lui.addon:not([class*="right addon"]),
	&[class*="with addons"] > .lui.addon:first-child {
		border-radius: @border-radius 0 0 @border-radius;
		+ input { border-radius: 0 @border-radius @border-radius 0; }
	}

	> .lui[class*="right addon"],
	&[class*="with addons"] .lui.addon:last-child {
		border-radius: 0 @border-radius @border-radius 0;
		margin-left: -@border-radius;
	}

	&[class*="with addons"] > input {
		border-radius: 0 !important;
	}
}

// Addons support coloring
// =====
@coloring-ruleset: {
	background-color: @coloring-color;
	border-color: @coloring-color;
	color: @coloring-text;
	& when (@coloring-lightOnDark = true) { text-shadow: 0 1px 1px darken(@coloring-color, 15); }
};
.lui.input[class*="with addon"] > .addon,
.lui.input[class*="with addons"] > .addon {
	.lui_supports_coloring(@coloring-ruleset);
}

// Inputs length (horizontal sizing)
// =====
.lui.input.short, .lui.field.short > input { min-width: 0; width: 8em !important; }
.lui.input.medium, .lui.field.medium > input { min-width: 0; width: 15em !important; }
.lui.input.long, .lui.field.long > input { min-width: 0; width: 20em !important; }
.lui.input.x-long, .lui.field.x-long > input { min-width: 0; width: 25em !important; }



/**
 * Form & field elements
 * --------------------------------------------------------------------------- */

.lui.form {

	.lui.field { // Automatic inputs styling
		padding-top: 1em;

		.lui.input;
		&:not(.inline) {
			.flex-direction(column);

			label {
				display: block;
			}
		}

		input[type="checkbox"] { width: auto; }
		input[type="checkbox"] + label { margin-left: 0.5em; }

		label {
			font-weight: 600;
		}

		// Angular support
		// =====
		&.ng-invalid {
			.lui.input.invalid;
		}
	}
}


/**
 * Sizing support
 * --------------------------------------------------------------------------- */

.lui.input {
	.lui_supports_sizing({
		font-size: @sizeEms;
	});
}


/**
 * Search input
 * --------------------------------------------------------------------------- */

.lui.input.search {
	.lui_make_icon(search);

	> input {
		padding-left: 3em;
	}

	&.searching {
		.lui_loader();
		&:after {
			margin-left: 0;
			left: 1em;
		}
	}

	&:before, &:after {
		cursor: text;
		display: inline-block;
		position: absolute;
		top: 50%; left: 1em;
		-ms-transform: translate(0, -50%);
		transform: translate(0, -50%);
		.user_select_none();
	}

	i.empty {
		.lui_make_icon(cross); font-style: normal;
		cursor: pointer;

		font-size: 0.5rem;
		width: 1rem; height: 1rem;
		text-align: center;
		border-radius: 50%;

		&, &:before {
			position: absolute;
			top: 50%; transform: translateY(-50%);
		}
		right: 1em;
		&:before { right: 0.5em; }

		background: @border-color;
		color: #FFF;
	}
}


/**
 * Checkbox
 * --------------------------------------------------------------------------- */

.lui.input.checkbox {
	display: inline-block;
	vertical-align: middle;
	position: relative;
	height: 1.25em;
	width: 1.25em;
	border: 1px solid @border-color;
	overflow: hidden;

	input, label {
		margin: 0;
	}

	input {
		position: absolute;
		left: 0; top: 0;
		z-index: 4;
		width: 100%;
		height: 100%;
		cursor: pointer;
		opacity: 0;
	}

	label {
		display: block;
		box-sizing: border-box;
		position: relative;
		top: 0; bottom: 0; left: 0; right: 0;
		padding: 0;
		height: 100%; width: 100%;
		min-height: 0; // Bootstrap override

		.lui_make_icon(checkbox, left); // Before is unchecked
		.lui_make_icon(check, right); // After is checked

		&:before, &:after {
			position: absolute;
			top: 50%; left: 50%;
			-ms-transform: translate(-50%, -50%);
			transform: translate(-50%, -50%);
			z-index: 2;
			font-size: 1.25em;
			margin: 0;
		}

		&:before {
			color: #FFF;
		}

		&:after {
			font-size: 0.8em;
			z-index: 3;
			color: @checkbox-color;
			opacity: 0;
			.lui_transition();
		}
	}

	input:checked ~ label {
		&:after {
			opacity: 1;
		}
	}

	&:hover label:after {
		opacity: 0.5;
	}
}


/**
 * Toggle
 * --------------------------------------------------------------------------- */

.lui.input.switch {
	@width: 4.5em;
	@height: 2.25em;

	display: inline-block;
	vertical-align: middle;
	position: relative;
	height: @height;
	width: @width;

	input {
		position: absolute;
		z-index: 3;
		width: 100%;
		height: 100%;
		cursor: pointer;
		opacity: 0;
		margin: 0;
	}

	label {
		display: block;
		width: 100%;
		height: 100%;
		position: relative;
		background: @switch-bg;
		color: @switch-color;
		.lui_transition();
		.lui_make_icon(check, left);
		.lui_make_icon(cross, right);

		&:before, &:after {
			display: block;
			position: absolute;
			top: 0.5em;
			z-index: 1;
		}

		&:before {
			left: 0.5em;
		}

		&:after {
			right: 0.5em;
		}

		span {
			background: #fff;
			display: block;
			position: absolute;
			top: 0;
			bottom: 0;
			left: 0.5em;
			right: 0;
			height: 1.5em;
			width: 1.5em;
			margin: auto 0;
			z-index: 2;
			.lui_transition();

			&:before {
				position: absolute;
				top: 0;
				bottom: 0;
				left: 0;
				right: 0;
				content: '';
				display: block;
				height: 50%;
				width: 0.1em;
				background: @switch-grab-lines-color;
				box-shadow: -0.2em 0 0 0 @switch-grab-lines-color, 0.2em 0 0 0 @switch-grab-lines-color;
				margin: auto;
				.lui_transition();
			}
		}
	}

	input:checked ~ label {
		background: @switch-bg-active;
		color: @switch-color-active;
	}

	input:checked ~ label span {
		left: 2.5em;
	}
}

luid-timespan, .luid-timespan {
	.lui.input;

	> input { width: 5em; line-height: (1em + 2 * @v-padding); }
}


/**
 * Momentpicker
 * --------------------------------------------------------------------------- */

luid-moment, .luid-moment{
	max-width: 5.25em;
	position: relative;
	display: inline-block;

	&:active, &:focus {
		box-shadow: none;
	}

	// styling the inputs inside the directive
	input, .input{
		&:focus, &:active {
			outline: none;
			box-shadow: none;
		}

		background-color: transparent;
		border: none;
		width: 1.3em;
		line-height: 1;
		&:nth-child(1) {
			text-align: right;
		}
	}
	// buttons + -
	.mp-button {
		user-select: none;
		font-size: 75%;
		position: absolute;
		z-index: 999;
		cursor: pointer;
		left:-1px;
		right:-1px;
		text-align: center;
		color: #FFF;
		background-color: @border-color;

		// Positions
		&.top { bottom: 100%; }
		&.bottom { top: 100%; }
		&.left { right: 50%; }
		&.right { left: 50%; }
	}

	&.ng-invalid {
		.lui.input.invalid !important;
		border-color: @invalid-color !important;
		.mp-button {
			background-color: @invalid-color !important;
		}
	}
}



/**
 * Validation
 * --------------------------------------------------------------------------- */

.lui.input.invalid {
	color: @invalid-color;
	> input {
		color: @invalid-color;
		border-color: @invalid-color;
		.lui_placeholder({
			color: lighten(@invalid-color, 15);
		});
	}
}
