/*! lucca-ui 08-01-2016 */
!function(){"use strict";angular.module("moment",[]).factory("moment",function(){return window.moment}),angular.module("underscore",[]).factory("_",function(){return window._}),angular.module("lui.directives",["pascalprecht.translate","moment","underscore","ui.select","ui.bootstrap"]),angular.module("lui.filters",["moment"]),angular.module("lui.services",[]),angular.module("lui.templates.momentpicker",[]),angular.module("lui.templates.daterangepicker",[]),angular.module("lui.templates.translationsinput",[]),angular.module("lui.templates",["lui.templates.momentpicker","lui.templates.daterangepicker","lui.templates.translationsinput"]),angular.module("lui.translates.userpicker",[]),angular.module("lui.translates.daterangepicker",[]),angular.module("lui.translates",["pascalprecht.translate","lui.translates.userpicker","lui.translates.daterangepicker"]),angular.module("lui",["lui.directives","lui.services","lui.filters","lui.templates","lui.translates"])}(),function(){"use strict";angular.module("lui.directives").directive("luidPercentage",function(){function a(a,b,c,d){var e=d[1],f=d[0];if(a.pattern=/^([0-9]+)(\.([0-9]*)?)?$/i,c.format){if("0.XX"!==c.format&&"1.XX"!==c.format&&"XX"!==c.format)return void(e.$render=function(){a.intPct="unsupported format"})}else a.format="0.XX";a.ngModelCtrl=e,e.$render=function(){return void 0===this.$viewValue?void(a.intPct=void 0):void(a.intPct=a.parse(parseFloat(this.$viewValue)))},e.$viewChangeListeners.push(function(){a.$eval(c.ngChange)}),f.setupEvents(b.find("input"))}return{require:["luidPercentage","^ngModel"],controller:"luidPercentageController",scope:{step:"=",format:"@",ngDisabled:"=",placeholder:"@"},restrict:"EA",link:a,template:"<div class='lui short input with addon'><input class='lui right aligned' type='text' ng-disabled='ngDisabled' placeholder='{{placeholder}}' ng-model='intPct' ng-change='updateValue()' ng-blur='formatInputValue()'><i class='lui right addon'>%</i></div>"}}).controller("luidPercentageController",["$scope",function(a){function b(b){c(parseFloat(a.intPct)+b)}function c(b){d(b),a.ngModelCtrl.$render()}function d(b){function c(b){switch(a.format||"0.XX"){case"XX":return b;case"0.XX":return b/100;case"1.XX":return b/100+1;default:return 0}}var d=void 0===b?void 0:c(b);a.ngModelCtrl.$setViewValue(d)}this.setupEvents=function(c){function d(){return isNaN(parseInt(a.step))?5:parseInt(a.step)}function e(c){var e=d();c.bind("keydown",function(c){switch(c.which){case 38:c.preventDefault(),b(e),a.$apply();break;case 40:c.preventDefault(),b(-e),a.$apply();break;case 13:c.preventDefault(),a.formatInputValue(),a.$apply()}})}function f(c){function e(a){a=a.originalEvent?a.originalEvent:a;var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0}var f=d();c.bind("mousewheel wheel",function(c){this===document.activeElement&&(a.$apply(b(e(c)?f:-f)),c.preventDefault())})}e(c),f(c)},a.updateValue=function(){d(a.intPct)},a.parse=function(b){switch(a.format||"0.XX"){case"XX":return b;case"0.XX":return Math.round(1e4*b)/100;case"1.XX":return Math.round(1e4*(b-1))/100;default:return 0}},a.formatInputValue=function(){a.ngModelCtrl.$render()}}])}(),function(){"use strict";angular.module("lui.directives").directive("luidTimespan",["moment",function(a){function b(b,c,d,e){var f=e[1],g=e[0];if(b.pattern=/^([0-9]+)((h([0-9]{2})?)?(m(in)?)?)?$/i,d.unit){var h=b.$eval(d.unit);("h"==h||"hour"==h||"hours"==h)&&(b.useHours=!0)}b.ngModelCtrl=f,f.$render=function(){if(!this.$viewValue)return void(b.strDuration="");var c=a.duration(this.$viewValue),d=Math.floor(c.asHours()),e=c.minutes();0===d?b.strDuration=e+"m":b.strDuration=(10>d?"0":"")+d+"h"+(10>e?"0":"")+e},g.setupEvents(c.find("input")),g.mode=d.mode?d.mode:"timespan"}return{require:["luidTimespan","^ngModel"],controller:"luidTimespanController",scope:{step:"=",unit:"=",ngDisabled:"=",placeholder:"@",mode:"=",min:"=",max:"="},restrict:"EA",link:b,template:"<input type='text' ng-disabled='ngDisabled' placeholder='{{placeholder}}' ng-pattern='pattern' ng-model='strDuration' ng-change='updateValue()' ng-blur='formatInputValue()'>"}}]).controller("luidTimespanController",["$scope","moment",function(a,b){function c(c){function d(a){var c=b.duration(),d=a.split(/h/i);c.add(parseInt(d[0]),"hours");var e=d[1];return e&&e.length>=2&&c.add(parseInt(e.substring(0,2)),"minutes"),c}function e(a){var c=b.duration(),d=a.split(/m/i);return c.add(parseInt(d[0]),"minutes"),c}function f(a){var c=b.duration(),d=a.split(/h/i);return c.add(parseInt(d[0]),"hours"),c}switch(!0){case/h/i.test(c):return d(c);case/m/i.test(c):return e(c);case a.useHours:return f(c);default:return e(c)}}function d(a){var c=b.duration(g()).add(a,"minutes");c.asMilliseconds()<0&&(c=b.duration()),e(c)}function e(b){f(b),a.ngModelCtrl.$render()}function f(c,d){function e(c){function d(c){var d=a.min?b.duration(a.min):void 0;return!d||c>=d?c:d}function e(c){var d=a.max?b.duration(a.max):void 0;return!d||d>=c?c:d}return e(d(c))}function f(a,b){return"timespan"===b?(a.days()>0?Math.floor(a.asDays())+".":"")+(a.hours()<10?"0":"")+a.hours()+":"+(a.minutes()<10?"0":"")+a.minutes()+":00":a}if(void 0===c)return a.ngModelCtrl.$setViewValue(void 0);c=e(c);var g=f(c,d);a.ngModelCtrl.$setViewValue(g)}function g(){return a.ngModelCtrl.$viewValue}var h=this;this.setupEvents=function(b){function c(){return isNaN(parseInt(a.step))?5:parseInt(a.step)}function e(b){var e=c();b.bind("keydown",function(b){switch(b.which){case 38:b.preventDefault(),d(e),a.$apply();break;case 40:b.preventDefault(),d(-e),a.$apply();break;case 13:b.preventDefault(),a.formatInputValue(),a.$apply()}})}function f(b){function e(a){a=a.originalEvent?a.originalEvent:a;var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0}var f=c();b.bind("mousewheel wheel",function(b){this===document.activeElement&&(a.$apply(d(e(b)?f:-f)),b.preventDefault())})}e(b),f(b)},a.updateValue=function(){if(!a.strDuration)return f(void 0,h.mode);var b=c(a.strDuration);f(b,h.mode)},a.formatInputValue=function(){a.ngModelCtrl.$render()}}])}(),function(){"use strict";function a(a,b,c){function d(a){return a.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}return a?a.replace(new RegExp(d(b),"g"),c):""}angular.module("lui.filters").filter("luifPlaceholder",function(){return function(a,b){return a?a:b}}).filter("luifDefaultCode",function(){return function(b){return a(b," ","_").toUpperCase()}}).filter("luifStartFrom",function(){return function(a,b){return b=+b,a.slice(b)}}).filter("luifNumber",["$sce","$filter",function(a,b){return function(c,d,e){function f(a,b){return void 0===a?'<span style="opacity:0"></span>':0===parseInt(a)?'<span style="opacity:0">'+b+a+"</span>":"<span>"+b+a+"</span>"}var g=void 0===e?"":e,h=void 0===c||null===c||""===c||c!=c?g:c,i=b("number")(1.1,1)[1],j=void 0===d||null===d||d!=d?2:d,k=b("number")(h,j),l=(k||b("number")(0,j)).split(i)[1],m=f(l,i);if(""===h||!k)return a.trustAsHtml(h+m);var n=k.split(i)[0];return a.trustAsHtml(n+m)}}])}(),function(){"use strict";var a=function(a,b){var c=moment(a);return c.isValid()?c.format(b):a};angular.module("lui.filters").filter("luifFriendlyRange",function(){var a={en:{sameDay:"start(LL)",sameMonth:"start(MMMM Do) - end(Do, YYYY)",sameYear:"start(MMMM Do) - end(LL)",other:"start(LL) - end(LL)"},fr:{sameDay:"le start(LL)",sameMonth:"du start(Do) au end(LL)",sameYear:"du start(Do MMMM) au end(LL)",other:"du start(LL) au end(LL)"}},b={en:{sameDay:"start(MMMM Do)",sameMonth:"start(MMMM Do) - end(Do)",sameYear:"start(MMMM Do) - end(MMMM Do)",other:"start(LL) - end(LL)"},fr:{sameDay:"le start(Do MMMM)",sameMonth:"du start(Do) au end(Do MMMM)",sameYear:"du start(Do MMMM) au end(Do MMMM)",other:"du start(LL) au end(LL)"}};return function(c,d){if(c){var e=moment(c.startsAt||c.startsOn||c.startDate||c.start),f=moment(c.endsAt||c.endsOn||c.endDate||c.end);d&&f.add(-1,"d");var g=a[moment.locale()]||a.en;moment().year()===e.year()&&moment().year()===f.year()&&(g=b[moment.locale()]||b.en);var h=e.year()===f.year()?e.month()===f.month()?e.date()===f.date()?"sameDay":"sameMonth":"sameYear":"other",i=/(start\((.*?)\))(.*(end\((.*?)\))){0,1}/gi.exec(g[h]);return g[h].replace(i[1],e.format(i[2])).replace(i[4],f.format(i[5]))}}}).filter("luifMoment",function(){return function(b,c){return c||(c="LLL"),a(b,c)}}).filter("luifCalendar",function(){return function(a,b){var c=moment(a);b&&moment(b).isValid()?moment(b):moment();return c.isValid()?c.calendar(b):a}}).filter("luifDuration",["$filter",function(a){return function(b,c,d,e){function f(a){switch(a){case"d":case"day":case"days":return 0;case void 0:case"":case"h":case"hour":case"hours":return 1;case"m":case"min":case"mins":case"minute":case"minutes":return 2;case"s":case"sec":case"second":case"seconds":return 3;case"ms":case"millisec":case"millisecond":case"milliseconds":return 4}}function g(a,b){return 4===b?4:0!==a[b]?b:g(a,b+1)}function h(a,b){return 0===b?0:0!==a[b]?b:h(a,b-1)}function i(a){switch(!0){case 0===Math.floor(10*a%10)&&0===Math.floor(100*a%10):return 0;case 0===Math.floor(100*a%10):return 1;default:return 2}}function j(a,b,c){switch(b){case c:return a;case 2:case 3:return 10>a?"0"+a:a;case 4:return 10>a?"00"+a:100>a?"0"+a:a;default:return a}}function k(a,b){if(a){if(b.asMilliseconds()>0)return"+";if(b.asMilliseconds()<0)return"-"}return""}function l(a,b){var c=["d ","h","m","s","ms"];switch(moment.locale()){case"fr":c[0]="j "}return 3>=a&&4===b&&(c[3]=".",c[4]="s"),1>=a&&2===b&&(c[2]=""),2===a&&3===b&&(c[3]=""),c}var m=[{index:0,unit:"d",dateConversion:"asDays",expectedPrecision:"h"},{index:1,unit:"h",dateConversion:"asHours",expectedPrecision:"m"},{index:2,unit:"m",dateConversion:"asMinutes",expectedPrecision:"s"},{index:3,unit:"s",dateConversion:"asSeconds",expectedPrecision:"s"},{index:4,unit:"ms",dateConversion:"asMilliseconds",expectedPrecision:"ms"}],n=moment.duration(b);if(0===n.asMilliseconds())return"";var o=[Math.abs(n.days()),Math.abs(n.hours()),Math.abs(n.minutes()),Math.abs(n.seconds()),Math.abs(n.milliseconds())],p=m[f(d)],q=Math.max(p.index,g(o,0));if(o[p.index]=Math.abs(n[p.dateConversion]()>=0?Math.floor(n[p.dateConversion]()):Math.ceil(n[p.dateConversion]())),0===p.index&&0===f(e)&&n.asDays()>0){var r=n.asDays(),s=i(r);q=0,o[0]=a("number")(r,s)}for(var t=h(o,f(e||p.expectedPrecision)),u=l(q,t),v="",w=q;t>=w;w++)v+=j(o[w],w,q)+u[w];var x=v?k(c,n):"";return x+v}}]).filter("luifHumanize",function(){return function(a,b){b=!!b;var c=moment.duration(a);return c.humanize(b)}})}();